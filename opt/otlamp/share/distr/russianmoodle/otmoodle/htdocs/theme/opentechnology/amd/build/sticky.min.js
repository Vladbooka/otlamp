define ("theme_opentechnology/sticky",["jquery"],function(a){return{nextMarginTop:null,stickMe:function stickMe(b,c,d){var e=this;if(!b.is(":visible")){return c}b.addClass("ot-sticky").addClass("moodle-has-zindex").css("top",c).css("z-index",d);var f=c+b.outerHeight();if("dock_bg"==b.attr("id")||0<b.find("#dock_bg").length){get_initialised_dock().then(function(b){e.stickMe(a(b),a("#dock_bg").first().offset().top-a(document).scrollTop(),d)})}return f},stickUpper:function stickUpper(b,c,d){var e=this;if("body-inner"!=b.parent().attr("id")){var f=this.stickUpper(b.parent(),c,d);c=f.stickyHeight;d=f.zindex}a(b.prevAll().not("script").not("style").get().reverse()).each(function(){if(0<a(this).find(".dock_bg_wrapper").length){var b=e.stick(a("#page-header .dock_bg_wrapper"),c,d--,!1);c=b.stickyHeight;d=b.zindex-1}else{c=e.stickMe(a(this),c,d--)}});return{stickyHeight:c,zindex:d}},findNext:function findNext(a){var b=this,c=a.next();if(0<c.length){return c}else{var d=a.parent();if(0<d.length){return b.findNext(d)}else{return!1}}},stick:function stick(a,b,c,d){var e=this,b=b||0,c=c||999,d=d||!0,f=e.stickUpper(a,b,c),g=e.stickMe(a,f.stickyHeight,f.zindex);if(d){var h=e.findNext(a);if(h){if(null===e.nextMarginTop){e.nextMarginTop=parseInt(h.css("margin-top"))}h.css("margin-top",e.nextMarginTop+g)}}return{stickyHeight:g,zindex:f.zindex}},init:function init(b){var c=this;c.stick(a(b));a(window).resize(function(){c.stick(a(b))});document.addEventListener("DockItemsChanged",function(){c.stick(a(b))},!1);a(document).scroll(function(){a("body").toggleClass("ot-sticky-scrolled",0<a(document).scrollTop())});a("body").addClass("ot-sticky-enabled");theme_opentechnology_handle_resize()}}});
//# sourceMappingURL=sticky.min.js.map
