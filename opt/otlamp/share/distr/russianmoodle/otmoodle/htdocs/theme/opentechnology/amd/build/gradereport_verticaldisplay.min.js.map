{"version":3,"sources":["../src/gradereport_verticaldisplay.js"],"names":["define","$","SVGNS","XLINKNS","textrotate_make_svg","el","obj","string","firstChild","textContent","abs","document","createElement","appendChild","createTextNode","style","position","body","textWidth","offsetWidth","textHeight","offsetHeight","removeChild","svg","createElementNS","setAttribute","width","text","icon","nodeName","toLowerCase","image","iconx","setAttributeNS","src","init","each","verticalAlign"],"mappings":"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","sourcesContent":["define(['jquery'], function($) {\n    return {\n        SVGNS: 'http://www.w3.org/2000/svg',\n        XLINKNS: 'http://www.w3.org/1999/xlink',\n\n        textrotate_make_svg: function(el)\n        {\n          var obj = this;\n          var string=el.firstChild.textContent;\n\n            // Add absolute-positioned string (to measure length)\n            var abs=document.createElement('div');\n            abs.appendChild(document.createTextNode(string));\n            abs.style.position='absolute';\n            document.body.appendChild(abs);\n            var textWidth=abs.offsetWidth * 1.2,textHeight=abs.offsetHeight;\n            document.body.removeChild(abs);\n\n            // Create SVG\n            var svg=document.createElementNS(obj.SVGNS,'svg');\n            svg.setAttribute('version','1.1');\n            var width=(textHeight*9)/8;\n            svg.setAttribute('width',width);\n            svg.setAttribute('height',textWidth+20);\n\n            // Add text\n            var text=document.createElementNS(obj.SVGNS,'text');\n            svg.appendChild(text);\n            text.setAttribute('x',textWidth);\n            text.setAttribute('y',-textHeight/2);\n            text.setAttribute('text-anchor','end');\n            text.setAttribute('transform','rotate(90)');\n            text.appendChild(document.createTextNode(string));\n\n            // Is there an icon near the text?\n            var icon=el.firstChild.firstChild;\n            if(icon.nodeName.toLowerCase()=='img') {\n              el.firstChild.removeChild(icon);\n              var image=document.createElementNS(obj.SVGNS,'image');\n              var iconx=el.offsetHeight/4;\n              if(iconx>width-16) {iconx=width-16;}\n              image.setAttribute('x',iconx);\n              image.setAttribute('y',textWidth+4);\n              image.setAttribute('width',16);\n              image.setAttribute('height',16);\n              image.setAttributeNS(obj.XLINKNS,'href',icon.src);\n              svg.appendChild(image);\n            }\n\n           // Replace original content with this new SVG\n            el.firstChild.textContent = '';\n            el.firstChild.appendChild(svg);\n        },\n        /**\n         * Базовая инициализация\n         */\n        init: function() {\n            var obj = this;\n            $(function() {\n                $('.path-grade-report .gradeparent tr.heading th.item.cell').each(function(){\n                        this.style.verticalAlign='bottom';\n                        obj.textrotate_make_svg(this);\n                });\n            });\n        }\n    };\n});"],"file":"gradereport_verticaldisplay.min.js"}