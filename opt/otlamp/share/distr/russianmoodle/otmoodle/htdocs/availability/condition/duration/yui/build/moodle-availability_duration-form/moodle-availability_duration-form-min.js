YUI.add("moodle-availability_duration-form",function(c,e){M.availability_duration=M.availability_duration||{},M.availability_duration.form=c.Object(M.core_availability.plugin),M.availability_duration.form.initInner=function(e){e!==undefined&&e.otcourselogics!==undefined&&(this.otcourselogics=e.otcourselogics)},M.availability_duration.form.getNode=function(e){var a,t,i,n,o=M.str.availability_duration,u=function(e,a){return'<div><label><input name="source" type="radio" class="form-check-input" value="'+e+'"/> '+a+"</label></div>"},l="";if(l+=u("coursedate",o.setcoursedate),l+=u("enrollmentdate",o.setenrollmentdate),l+=u("unenrollmentdate",o.setunenrollmentdate),l+=u("courselastaccessdate",o.setcourselastaccessdate),0<this.otcourselogics.length){for(l+=u("sincecourselogicactivate",o.setcourselogicactivatedate),l+='<select name="courselogiccminstance" class="custom-select">',a=0;a<this.otcourselogics.length;a++)l+='<option value="'+(t=this.otcourselogics[a]).cminstance+'">'+t.name+"</option>";l+="</select>"}return l+='<div class="form-group"><label>'+o.setduration+': <input name="duration" type="text"  class="form-control mx-1"/><select name="durationmeasure" class="custom-select"><option value="w">'+o.durationmeasurew+'<option value="d" selected="true">'+o.durationmeasured+'<option value="h">'+o.durationmeasureh+'<option value="m">'+o.durationmeasurem+"</select></label></div>",i=c.Node.create("<div>"+l+"</div>"),e.instanceid!==undefined&&i.all("input[name=source]").each(function(){this.setAttribute("name","source["+e.instanceid+"]")}),e.source!==undefined?(i.one("input[name^=source][value="+e.source+"]").set("checked",!0),"sincecourselogicactivate"==e.source&&e.courselogiccminstance!==undefined&&i.one("select[name=courselogiccminstance]").set("value",e.courselogiccminstance)):i.one("input[name^=source]").set("checked",!0),e.duration!==undefined?i.one("input[name=duration]").set("value",e.duration):i.one("input[name=duration]").set("value",1),e.durationmeasure!==undefined&&i.one("select[name=durationmeasure]").set("value",e.durationmeasure),M.availability_duration.form.addedEvents||(M.availability_duration.form.addedEvents=!0,(n=c.one(".availability-field")).delegate("click",function(){M.core_availability.form.update()},".availability_duration input[type=radio]"),n.delegate("valuechange",function(){M.core_availability.form.update()},".availability_duration input[type=text], .availability_duration select")),i},M.availability_duration.form.fillValue=function(e,a){var t,i,n,o,u=a.get("id");e.instanceid=u,a.all("input[type=radio]").each(function(){"source"==this.get("name")&&this.setAttribute("name","source["+u+"]")}),null!=(t=a.one("input[name^=source]:checked"))&&(e.source=t.get("value")),null!=(i=a.one("input[name=duration]"))&&(e.duration=parseInt(i.get("value"))),null!=(n=a.one("select[name=durationmeasure]"))&&(e.durationmeasure=n.get("value")),null!=(o=a.one("select[name=courselogiccminstance]"))&&(e.courselogiccminstance=o.get("value"))},M.availability_duration.form.fillErrors=function(){}},"@VERSION@",{requires:["base","node","event","moodle-core_availability-form"]});