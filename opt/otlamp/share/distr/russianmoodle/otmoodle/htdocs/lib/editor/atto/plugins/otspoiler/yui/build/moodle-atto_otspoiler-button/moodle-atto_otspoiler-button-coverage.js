if (typeof __coverage__ === 'undefined') { __coverage__ = {}; }
if (!__coverage__['build/moodle-atto_otspoiler-button/moodle-atto_otspoiler-button.js']) {
}
var __cov_tb2Z0kAJhEYvw0HCmEftxA = __coverage__['build/moodle-atto_otspoiler-button/moodle-atto_otspoiler-button.js'];
__cov_tb2Z0kAJhEYvw0HCmEftxA.s['1']++;YUI.add('moodle-atto_otspoiler-button',function(Y,NAME){__cov_tb2Z0kAJhEYvw0HCmEftxA.f['1']++;__cov_tb2Z0kAJhEYvw0HCmEftxA.s['2']++;var COMPONENT='atto_otspoiler';__cov_tb2Z0kAJhEYvw0HCmEftxA.s['3']++;Y.namespace('M.atto_otspoiler').Button=Y.Base.create('button',Y.M.editor_atto.EditorPlugin,[],{initializer:function(){__cov_tb2Z0kAJhEYvw0HCmEftxA.f['2']++;__cov_tb2Z0kAJhEYvw0HCmEftxA.s['4']++;this.addButton({icon:'e/atto_spoiler',title:'spoiler',buttonName:'spoiler',callback:this._spoiler});},_spoiler:function(){__cov_tb2Z0kAJhEYvw0HCmEftxA.f['3']++;__cov_tb2Z0kAJhEYvw0HCmEftxA.s['5']++;var unspoilresult=this.unspoil();__cov_tb2Z0kAJhEYvw0HCmEftxA.s['6']++;if(!unspoilresult){__cov_tb2Z0kAJhEYvw0HCmEftxA.b['1'][0]++;__cov_tb2Z0kAJhEYvw0HCmEftxA.s['7']++;this.spoil();}else{__cov_tb2Z0kAJhEYvw0HCmEftxA.b['1'][1]++;}},unspoil:function(){__cov_tb2Z0kAJhEYvw0HCmEftxA.f['4']++;__cov_tb2Z0kAJhEYvw0HCmEftxA.s['8']++;var selection=window.rangy.saveSelection(),blockquotes=this.editor.all('blockquote'),count=blockquotes.size();__cov_tb2Z0kAJhEYvw0HCmEftxA.s['9']++;this.editor.all('.rangySelectionBoundary').setStyle('display',null);__cov_tb2Z0kAJhEYvw0HCmEftxA.s['10']++;blockquotes.addClass('pre-existing');__cov_tb2Z0kAJhEYvw0HCmEftxA.s['11']++;var replaced=this.replaceEditorSpoilers(this.editor);__cov_tb2Z0kAJhEYvw0HCmEftxA.s['12']++;window.rangy.restoreSelection(selection);__cov_tb2Z0kAJhEYvw0HCmEftxA.s['13']++;selection=window.rangy.saveSelection();__cov_tb2Z0kAJhEYvw0HCmEftxA.s['14']++;document.execCommand('outdent',false,null);__cov_tb2Z0kAJhEYvw0HCmEftxA.s['15']++;blockquotes=this.editor.all('blockquote');__cov_tb2Z0kAJhEYvw0HCmEftxA.s['16']++;if(blockquotes.size()!==count){__cov_tb2Z0kAJhEYvw0HCmEftxA.b['2'][0]++;__cov_tb2Z0kAJhEYvw0HCmEftxA.s['17']++;this.replaceBlockquote(this.editor);__cov_tb2Z0kAJhEYvw0HCmEftxA.s['18']++;window.rangy.restoreSelection(selection);}else{__cov_tb2Z0kAJhEYvw0HCmEftxA.b['2'][1]++;__cov_tb2Z0kAJhEYvw0HCmEftxA.s['19']++;if(blockquotes.size()>0){__cov_tb2Z0kAJhEYvw0HCmEftxA.b['3'][0]++;__cov_tb2Z0kAJhEYvw0HCmEftxA.s['20']++;blockquotes.removeClass('pre-existing');}else{__cov_tb2Z0kAJhEYvw0HCmEftxA.b['3'][1]++;}}__cov_tb2Z0kAJhEYvw0HCmEftxA.s['21']++;window.rangy.removeMarkers(selection);__cov_tb2Z0kAJhEYvw0HCmEftxA.s['22']++;this.markUpdated();__cov_tb2Z0kAJhEYvw0HCmEftxA.s['23']++;return blockquotes.size()!==replaced;},spoil:function(){__cov_tb2Z0kAJhEYvw0HCmEftxA.f['5']++;__cov_tb2Z0kAJhEYvw0HCmEftxA.s['24']++;var selection=window.rangy.saveSelection(),blockquotes=this.editor.all('blockquote'),count=blockquotes.size();__cov_tb2Z0kAJhEYvw0HCmEftxA.s['25']++;this.editor.all('.rangySelectionBoundary').setStyle('display',null);__cov_tb2Z0kAJhEYvw0HCmEftxA.s['26']++;blockquotes.addClass('pre-existing');__cov_tb2Z0kAJhEYvw0HCmEftxA.s['27']++;document.execCommand('indent',false,null);__cov_tb2Z0kAJhEYvw0HCmEftxA.s['28']++;blockquotes=this.editor.all('blockquote');__cov_tb2Z0kAJhEYvw0HCmEftxA.s['29']++;if(blockquotes.size()!==count){__cov_tb2Z0kAJhEYvw0HCmEftxA.b['4'][0]++;__cov_tb2Z0kAJhEYvw0HCmEftxA.s['30']++;this.replaceBlockquote(this.editor);__cov_tb2Z0kAJhEYvw0HCmEftxA.s['31']++;window.rangy.restoreSelection(selection);}else{__cov_tb2Z0kAJhEYvw0HCmEftxA.b['4'][1]++;__cov_tb2Z0kAJhEYvw0HCmEftxA.s['32']++;if(blockquotes.size()>0){__cov_tb2Z0kAJhEYvw0HCmEftxA.b['5'][0]++;__cov_tb2Z0kAJhEYvw0HCmEftxA.s['33']++;blockquotes.removeClass('pre-existing');}else{__cov_tb2Z0kAJhEYvw0HCmEftxA.b['5'][1]++;}}__cov_tb2Z0kAJhEYvw0HCmEftxA.s['34']++;window.rangy.removeMarkers(selection);__cov_tb2Z0kAJhEYvw0HCmEftxA.s['35']++;this.markUpdated();},replaceBlockquote:function(editor){__cov_tb2Z0kAJhEYvw0HCmEftxA.f['6']++;__cov_tb2Z0kAJhEYvw0HCmEftxA.s['36']++;editor.all('blockquote').setAttribute('data-iterate',true);__cov_tb2Z0kAJhEYvw0HCmEftxA.s['37']++;var blockquote=editor.one('blockquote');__cov_tb2Z0kAJhEYvw0HCmEftxA.s['38']++;while(blockquote){__cov_tb2Z0kAJhEYvw0HCmEftxA.s['39']++;blockquote.removeAttribute('data-iterate');__cov_tb2Z0kAJhEYvw0HCmEftxA.s['40']++;if(blockquote.hasClass('pre-existing')){__cov_tb2Z0kAJhEYvw0HCmEftxA.b['6'][0]++;__cov_tb2Z0kAJhEYvw0HCmEftxA.s['41']++;blockquote.removeClass('pre-existing');}else{__cov_tb2Z0kAJhEYvw0HCmEftxA.b['6'][1]++;__cov_tb2Z0kAJhEYvw0HCmEftxA.s['42']++;var clone=Y.Node.create('<div></div>').setAttrs(blockquote.getAttrs()).addClass('otspoiler');__cov_tb2Z0kAJhEYvw0HCmEftxA.s['43']++;var children=blockquote.getDOMNode().childNodes,child;__cov_tb2Z0kAJhEYvw0HCmEftxA.s['44']++;child=children[0];__cov_tb2Z0kAJhEYvw0HCmEftxA.s['45']++;while(typeof child!=='undefined'){__cov_tb2Z0kAJhEYvw0HCmEftxA.s['46']++;clone.append(child);__cov_tb2Z0kAJhEYvw0HCmEftxA.s['47']++;child=children[0];}__cov_tb2Z0kAJhEYvw0HCmEftxA.s['48']++;blockquote.replace(clone);}__cov_tb2Z0kAJhEYvw0HCmEftxA.s['49']++;blockquote=editor.one('blockquote[data-iterate]');}},replaceEditorSpoilers:function(editor){__cov_tb2Z0kAJhEYvw0HCmEftxA.f['7']++;__cov_tb2Z0kAJhEYvw0HCmEftxA.s['50']++;var replaced=0;__cov_tb2Z0kAJhEYvw0HCmEftxA.s['51']++;var spoiler=editor.one('.otspoiler');__cov_tb2Z0kAJhEYvw0HCmEftxA.s['52']++;while(spoiler){__cov_tb2Z0kAJhEYvw0HCmEftxA.s['53']++;replaced++;__cov_tb2Z0kAJhEYvw0HCmEftxA.s['54']++;var clone=Y.Node.create('<blockquote></blockquote>').setAttrs(spoiler.getAttrs()).removeClass('otspoiler');__cov_tb2Z0kAJhEYvw0HCmEftxA.s['55']++;var children=spoiler.getDOMNode().childNodes,child;__cov_tb2Z0kAJhEYvw0HCmEftxA.s['56']++;child=children[0];__cov_tb2Z0kAJhEYvw0HCmEftxA.s['57']++;while(typeof child!=='undefined'){__cov_tb2Z0kAJhEYvw0HCmEftxA.s['58']++;clone.append(child);__cov_tb2Z0kAJhEYvw0HCmEftxA.s['59']++;child=children[0];}__cov_tb2Z0kAJhEYvw0HCmEftxA.s['60']++;spoiler.replace(clone);__cov_tb2Z0kAJhEYvw0HCmEftxA.s['61']++;spoiler=editor.one('.otspoiler');}__cov_tb2Z0kAJhEYvw0HCmEftxA.s['62']++;return replaced;}});},'@VERSION@',{'requires':['moodle-editor_atto-plugin']});
