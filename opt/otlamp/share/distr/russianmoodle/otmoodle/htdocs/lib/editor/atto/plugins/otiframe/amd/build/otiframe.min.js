define ("atto_otiframe/otiframe",["exports","jquery"],function(a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.init=void 0;b=function(a){return a&&a.__esModule?a:{default:a}}(b);var c=!1,d=20,e=5,f=function(){(0,b.default)(".otiframe").each(function(a,c){var d=(0,b.default)(c).attr("src"),e=(0,b.default)(c).data("source");if(!("undefined"!=typeof d&&!1!==d)&&"undefined"!=typeof e&&!1!==e){var f="/lib/editor/atto/plugins/otiframe/file.php?ois="+encodeURIComponent(e);(0,b.default)(c).removeAttr("srcdoc").attr({src:f,frameborder:0}).on("load",function(){(0,b.default)(this).addClass("loaded");h(this)});g(c,0,0)}});window.onresize=function(){(0,b.default)(".otiframe").each(function(a,b){g(b,0,0);h(b)})};window.addEventListener("message",i)};a.init=f;var g=function(a,c,d){(0,b.default)(a).data("heightChanges",c);(0,b.default)(a).data("widthChanges",d)},h=function(a){if((0,b.default)(a).hasClass("autosize")){a.style.height=a.contentWindow.document.body.scrollHeight+30+"px";if(c){a.style.width=a.contentWindow.document.body.scrollWidth+"px"}}},i=function(a){var f=null,h=null;if(a.data.hasOwnProperty("frameHeight")){h=a.data.frameHeight}if(a.data.hasOwnProperty("frameWidth")){f=a.data.frameWidth}if(null===f&&null===h){return}var i=j(a);if(null===i){return}if((0,b.default)(i).hasClass("autosize")){if((0,b.default)(i).data("inactiveTimer")){clearTimeout((0,b.default)(i).data("inactiveTimer"))}(0,b.default)(i).data("inactiveTimer",setTimeout(function(){g(i,0,0)},100));var k=(0,b.default)(i).data("heightChanges"),l=(0,b.default)(i).data("widthChanges");if(null!==h){var m=h-i.scrollHeight,n=0>m||m>30;window.console.log(i,h,i.scrollHeight,n,k,e);if(n&&k<e){i.style.height=h+30+"px";k++}}if(null!==f&&c){var o=f-i.scrollWidth,n=o<-d||o>d;if(n&&l<e){i.style.width=f+"px";l++}}g(i,k,l)}},j=function(a){for(var b=null,c=document.getElementsByTagName("IFRAME"),d=a.source,e=a.origin,g=0,h;g<c.length;g++){h=c[g];if(h.contentWindow==d||h.contentWindow==d.parent){b=h;break}}if(null===b){for(var g=0;g<c.length;g++){if(0==c[g].src.indexOf(e)){b=c[g];break}}}return b}});
//# sourceMappingURL=otiframe.min.js.map
