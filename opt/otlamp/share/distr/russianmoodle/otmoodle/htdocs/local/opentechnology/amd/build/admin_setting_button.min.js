define ("local_opentechnology/admin_setting_button",["jquery","core/notification","core/templates","core/modal_factory","core/yui"],function(a,b,c,d,e){return{_dialogues:[],_composeDialogueObject:function _composeDialogueObject(b,c){return{id:b,dialogue:c,get:function get(){var b=a.Deferred();b.resolve(this.dialogue);return b.promise()},setContent:function setContent(b){var c=a.Deferred(),d=this.get();d.done(function(a){a.set("bodyContent",b);a.centered();c.resolve()});return c.promise()},setHeader:function setHeader(b){var c=a.Deferred(),d=this.get();d.done(function(a){a.set("headerContent",b);a.centered();c.resolve()});return c.promise()},addClass:function addClass(b){var c=a.Deferred(),d=this.get();d.done(function(a){a.get("boundingBox").addClass(b);c.resolve()});return c.promise()},show:function show(){var b=a.Deferred(),c=this.get();c.done(function(a){a.show();b.resolve()});return b.promise()},hide:function hide(){var b=a.Deferred(),c=this.get();c.done(function(a){a.hide();b.resolve()});return b.promise()}}},getDialogue:function getDialogue(b){var c=this;if(!(b in c._dialogues)){c._dialogues[b]=a.Deferred();e.use("moodle-core-notification",function(){var a=e.Node.create("<img />").setAttribute("src",M.util.image_url("i/loading","moodle")).addClass("spinner"),d=new M.core.dialogue({headerContent:"&nbsp;",bodyContent:e.Node.create("<div />").addClass("content-lightbox").append(a),draggable:!0,visible:!1,center:!0,modal:!0,width:"500px"});c._dialogues[b].resolve(c._composeDialogueObject(b,d))})}return c._dialogues[b].promise()},initAndRender:function initAndRender(d,e,f,g){var h=this,i=a.Deferred();h.init(d,e).done(function(e){f.id=d;c.render(g,f).then(function(b,d){var f=a("<div>");c.replaceNodeContents(f,b,d);e.setContent(f)}).fail(function(a){e.setContent("error");b.alert(a.message)});i.resolve(e)});return i.promise()},init:function init(b,c){var d=this,e=a.Deferred();d.getDialogue(b).done(function(d){a("#"+b+"-button").unbind("click").click(function(a){a.preventDefault();d.show()}).removeAttr("disabled");a("#"+b).on("readyToSave",function(b,c){a(this).val(JSON.stringify(c));d.hide()});d.setHeader(c);e.resolve(d)});return e.promise()}}});
//# sourceMappingURL=admin_setting_button.min.js.map
