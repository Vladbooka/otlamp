{"version":3,"sources":["../src/hints_sugguestions.js"],"names":["define","$","init","click","query","children","data","option","prop","text","html","append","val","change","on","event","stopPropagation","form","closest","nextAll","find","first","focus","trigger","off","textinput","window","setTimeout","hide"],"mappings":"AAuBAA,OAAM,wCAAC,CAAC,QAAD,CAAD,CAAa,SAASC,CAAT,CAAY,CAE3B,MAAO,CACHC,IAAI,CAAE,eAAU,CAEZD,CAAC,CAAC,mEAAD,CAAD,CAAuEE,KAAvE,CAA6E,UAAU,IAC/EC,CAAAA,CAAK,CAAGH,CAAC,CAAC,IAAD,CAAD,CAAQI,QAAR,CAAiB,KAAjB,EAAwBC,IAAxB,CAA6B,OAA7B,CADuE,CAE/EC,CAAM,CAAGN,CAAC,CAAC,UAAD,CAAD,CAAcO,IAAd,CAAmB,OAAnB,CAA4BJ,CAA5B,EAAmCK,IAAnC,CAAwCL,CAAxC,CAFsE,CAGnFH,CAAC,CAAC,6DAAD,CAAD,CACKS,IADL,CACU,EADV,EAEKC,MAFL,CAEYJ,CAFZ,EAGKK,GAHL,CAGSR,CAHT,EAIKS,MAJL,EAKH,CARD,EAWAZ,CAAC,CAAC,6DAAD,CAAD,CAA+Da,EAA/D,CAAkE,QAAlE,CAA4E,SAASC,CAAT,CAAe,CACvFA,CAAK,CAACC,eAAN,GACA,GAAIC,CAAAA,CAAI,CAAGhB,CAAC,CAAC,IAAD,CAAD,CAAQiB,OAAR,CAAgB,MAAhB,CAAX,CACA,GAAiC,QAA7B,EAAAD,CAAI,CAACX,IAAL,CAAU,cAAV,CAAJ,CACA,CACIL,CAAC,CAAC,IAAD,CAAD,CAAQkB,OAAR,CAAgB,kBAAhB,EAAoCP,GAApC,CAAwC,EAAxC,EACAK,CAAI,CAACX,IAAL,CAAU,cAAV,CAA0B,QAA1B,EAAoCc,IAApC,CAAyC,oBAAzC,EAA+DC,KAA/D,GAAuElB,KAAvE,EACH,CACJ,CARD,EAUAF,CAAC,CAAC,+GAAD,CAAD,CACKqB,KADL,CACW,UAAU,CACb,GAAqB,EAAlB,GAAArB,CAAC,CAAC,IAAD,CAAD,CAAQW,GAAR,EAAH,CACA,CACIX,CAAC,CAAC,IAAD,CAAD,CAAQsB,OAAR,CAAgB,OAAhB,CACH,CACJ,CANL,EAOKC,GAPL,CAOS,MAPT,EAQKV,EARL,CAQQ,MARR,CAQgB,UAAU,CAClB,GAAIW,CAAAA,CAAS,CAAGxB,CAAC,CAAC,IAAD,CAAjB,CACAyB,MAAM,CAACC,UAAP,CAAkB,UAAW,CAAEF,CAAS,CAACN,OAAV,CAAkB,gCAAlB,EAAoDS,IAApD,EAA6D,CAA5F,CAA8F,GAA9F,CACH,CAXL,CAYH,CApCE,CAsCV,CAxCK,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Формирование подсказок с результатами поиска для автокоплита\n *\n * @package    local_crw\n * @subpackage crw_system_search\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine(['jquery'], function($) {\n\n    return {\n        init: function(){\n            // отправка формы поиска со страницы просмотра всех результатов\n            $('#local_crw .crw-search-results.form-autocomplete-suggestions > li').click(function(){\n                var query = $(this).children('div').data('query');\n                var option = $('<option>').prop('value', query).text(query);\n                $('form.crw_system_search_form select[name=\"topblock[crws]\"]')\n                    .html('')\n                    .append(option)\n                    .val(query)\n                    .change();\n            });\n\n            // автоотправка формы при выборе элемента\n            $('form.crw_system_search_form select[name=\"topblock[crws]\"]').on('change', function(event){\n                event.stopPropagation();\n                var form = $(this).closest('form');\n                if (form.data('submit-state') != 'submit')\n                {\n                    $(this).nextAll('input[type=text]').val('');\n                    form.data('submit-state', 'submit').find('input[type=submit]').first().click();\n                }\n            });\n\n            $('form.crw_system_search_form select[name=\"topblock[crws]\"] + .form-autocomplete-selection + input[type=text]')\n                .focus(function(){\n                    if($(this).val() !== '')\n                    {\n                        $(this).trigger('input');\n                    }\n                })\n                .off('blur')\n                .on('blur', function(){\n                    var textinput = $(this);\n                    window.setTimeout(function() { textinput.nextAll('.form-autocomplete-suggestions').hide(); }, 200);\n                });\n        }\n    };\n});"],"file":"hints_sugguestions.min.js"}