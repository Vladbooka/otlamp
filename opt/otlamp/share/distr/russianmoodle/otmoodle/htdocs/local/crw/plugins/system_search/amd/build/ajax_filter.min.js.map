{"version":3,"sources":["../src/ajax_filter.js"],"names":["define","$","notification","fragment","templates","init","contextid","categoryid","submit","e","preventDefault","data","showcase","parents","addClass","params","formdata","serialize","jsonformdata","JSON","stringify","loadFragment","done","html","js","replaceNodeContents","get","fail","exception","always","removeClass"],"mappings":"AAAAA,OAAM,iCAAC,CAAC,QAAD,CAAW,mBAAX,CAAgC,eAAhC,CAAiD,gBAAjD,CAAD,CAAqE,SAASC,CAAT,CAAYC,CAAZ,CAA0BC,CAA1B,CAAoCC,CAApC,CAA+C,CACtH,MAAO,CAKHC,IAAI,CAAE,cAASC,CAAT,CAAoBC,CAApB,CAAgC,CAClCN,CAAC,CAAC,wEAAD,CAAD,CAA0EO,MAA1E,CAAiF,SAASC,CAAT,CAAW,CACxFA,CAAC,CAACC,cAAF,GAEAT,CAAC,CAAC,IAAD,CAAD,CAAQU,IAAR,CAAa,cAAb,CAA6B,QAA7B,EACA,GAAuC,WAAnC,EAAAV,CAAC,CAAC,IAAD,CAAD,CAAQU,IAAR,CAAa,iBAAb,CAAJ,CACA,CACIV,CAAC,CAAC,IAAD,CAAD,CAAQU,IAAR,CAAa,iBAAb,CAAgC,WAAhC,EAEA,GAAIC,CAAAA,CAAQ,CAAGX,CAAC,CAAC,IAAD,CAAD,CAAQY,OAAR,CAAgB,YAAhB,CAAf,CACAD,CAAQ,CAACE,QAAT,CAAkB,SAAlB,EAJJ,GAMQC,CAAAA,CAAM,CAAG,CACT,WAAcR,CADL,CAET,cAAiBK,CAAQ,CAACD,IAAT,CAAc,WAAd,CAFR,CANjB,CAUQK,CAAQ,CAAGf,CAAC,CAAC,IAAD,CAAD,CAAQgB,SAAR,EAVnB,CAWI,GAAwB,WAApB,QAAOD,CAAAA,CAAX,CAAqC,CACjCD,CAAM,CAACG,YAAP,CAAsBC,IAAI,CAACC,SAAL,CAAeJ,CAAf,CACzB,CAEDb,CAAQ,CAACkB,YAAT,CAAsB,mBAAtB,CAA2C,QAA3C,CAAqDf,CAArD,CAAgES,CAAhE,EACKO,IADL,CACU,SAASC,CAAT,CAAeC,CAAf,CAAmB,CACrBpB,CAAS,CAACqB,mBAAV,CAA8Bb,CAAQ,CAACc,GAAT,CAAa,CAAb,CAA9B,CAA+CH,CAA/C,CAAqDC,CAArD,CACH,CAHL,EAIKG,IAJL,CAIUzB,CAAY,CAAC0B,SAJvB,EAKKC,MALL,CAKY,UAAU,CACdjB,CAAQ,CAACkB,WAAT,CAAqB,SAArB,CACH,CAPL,CASH,CACJ,CA9BD,CA+BH,CArCE,CAuCV,CAxCK,CAAN","sourcesContent":["define(['jquery', 'core/notification', 'core/fragment', 'core/templates'], function($, notification, fragment, templates) {\n    return {\n\n        /**\n         * Базовая инициализация ajax-загрузки\n         */\n        init: function(contextid, categoryid) {\n            $('#local_crw .crw_ptype_30 .crw_plugin_body form[data-ajax-filter=\"1\"]').submit(function(e){\n                e.preventDefault();\n\n                $(this).data('submit-state', 'submit');\n                if ($(this).data('submition-state') != 'submition')\n                {\n                    $(this).data('submition-state', 'submition');\n\n                    var showcase = $(this).parents('#local_crw');\n                    showcase.addClass('loading');\n\n                    var params = {\n                        'categoryid': categoryid,\n                        'splobjecthash': showcase.data('object-id')\n                    };\n                    var formdata = $(this).serialize();\n                    if (typeof formdata !== \"undefined\") {\n                        params.jsonformdata = JSON.stringify(formdata);\n                    }\n\n                    fragment.loadFragment('crw_system_search', 'search', contextid, params)\n                        .done(function(html, js) {\n                            templates.replaceNodeContents(showcase.get(0), html, js);\n                        })\n                        .fail(notification.exception)\n                        .always(function(){\n                            showcase.removeClass('loading');\n                        });\n\n                }\n            });\n        }\n    };\n});"],"file":"ajax_filter.min.js"}