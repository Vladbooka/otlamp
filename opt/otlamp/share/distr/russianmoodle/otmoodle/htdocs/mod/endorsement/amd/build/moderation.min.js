define(["jquery","core/ajax","core/str","core/notification","core/fragment","core/templates"],function(a,b,c,d,e,f){return{__contextid:null,__pageurl:null,initInstance:function(b){var c=this,g=b.parents(".mod_endorsement_item");b.parent().addClass("loading");var h=g.data("item-id"),i="item_"+h+"_status";b.find("input[type=radio][name="+i+"]").on("change",function(){a(this).closest("form").submit()}),b.find("input[type=radio][name="+i+"] + label").each(function(){a(this).attr("data-toggle","tooltip").prop("title",a(this).text()).text(""),a("<div>").addClass("statusimg").appendTo(a(this)),a(this).addClass("ready")}),b.find("form").on("submit",function(b){b.preventDefault();var g=a(this).parents(".mod_endorsement_item_field.mod_endorsement_item_moderator_tools");g.parent().addClass("loading");var i=a(this).serialize();if("undefined"!=typeof i){var j={jsonformdata:JSON.stringify(i),itemid:h,baseurl:c.__pageurl};e.loadFragment("mod_endorsement","change_status",c.__contextid,j).done(function(b,d){var e=a(this).parents(".mod_endorsement_item_field.mod_endorsement_item_moderator_tools");f.replaceNodeContents(e,b,d),c.initInstance(e)}).fail(d.exception).always(function(){g.parent().removeClass("loading")})}}),b.parent().removeClass("loading")},init:function(b,c){var d=this;d.__contextid=b,d.__pageurl=c,a(".mod_endorsement_list.moderatorside .mod_endorsement_item_moderator_tools").each(function(){d.initInstance(a(this))})}}});