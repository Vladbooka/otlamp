define ("quiz_otoverview/table_controller",["jquery","core/ajax","core/yui","core/fragment","core/templates","core/notification"],function(a,b,c,d,e,f){return{init:function init(){a(document).ready(function(){var c=[];window._open=window.open;window.open=function(a,b,d){c.push(window._open(a,b,d))};var g=a("#attemptsform"),h=0;if(0<g.length){h=g.find("input[name=id]").val()}var i=a("#attempts"),j=[];if(0<i.length){i.find("tbody tr").each(function(){var b=a(this).find("td input[type=checkbox]").val();if(b!==void 0){j.push(b)}})}var k=function(){var d=b.call([{methodname:"quiz_otoverview_get_attempts_data",args:{quizid:h,questionattemptsids:j}}]);d[0].done(function(b){b=a.parseJSON(b);i.find("tbody tr").each(function(){if(a(this).hasClass("otoverview-averagegroups")){var c="averagegroups"}else if(a(this).hasClass("otoverview-averageusers")){var c="averageusers"}else{var c=a(this).find("td input[type=checkbox]").val()}if(c===void 0||b[c]===void 0){return}var d=0;a.each(this.cells,function(){if(0!==d){a(this).html(b[c][d])}d++});if(0<a(this).find(".teacher-action-required").length){if(!a(this).hasClass("teacher-action-required")){a(this).addClass("teacher-action-required")}}else{a(this).removeClass("teacher-action-required")}});a("#attempts").find("a.otoverview_action_popup").each(function(){a(this).click(function(b){window.openpopup(b,{url:a(this).attr("href"),name:a(this).attr("act"),options:"height=800,width=600,top=0,left=0,menubar=0,location=0,scrollbars,resizable,toolbar,status,directories=0,fullscreen=0,dependent"});a.each(c,function(b,c){a(c.document).ready(function(){c.opener=null;var b=setInterval(function checkFunction(){if(0<a(this.document).find(".alert-success").length){this.close()}if(this.closed){clearInterval(b)}}.bind(c),2e3)})});a.each([],function(a,b){c.splice(b)})})})}).fail(f.exception).always(function(){setTimeout(function(){k()},1e4)})};if(0<g.length&&0<i.length&&0<j.length){k()}var l=a(".otoverview-charts"),m=function(a){d.loadFragment("quiz_otoverview","get_charts",1,a).done(function(a,b){if(0<a.length){l.css("min-height",l.outerHeight(!0)+"px");e.replaceNodeContents(l,a,b)}}).fail(f.exception).always(function(){setTimeout(function(){m(a)},1e4)})};if(0<h&&0<j.length){m({quizid:h,questionattemptsids:JSON.stringify(j)})}})}}});
//# sourceMappingURL=table_controller.min.js.map
